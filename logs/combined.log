{"level":"info","message":"Cache miss for search term: nam"}
{"error":"Class constructor ObjectId cannot be invoked without 'new'","level":"error","message":"Error in searchUsers:"}
{"level":"info","message":"Cache miss for search term: nam"}
{"error":"Class constructor ObjectId cannot be invoked without 'new'","level":"error","message":"Error in searchUsers:"}
{"level":"info","message":"Cache miss for search term: nam"}
{"level":"info","message":"Search completed for term: nam, found 3 results"}
{"level":"info","message":"Cache miss for search term: Nam"}
{"level":"info","message":"Search completed for term: Nam, found 3 results"}
{"level":"info","message":"Cache miss for search term: NhatNam"}
{"level":"info","message":"Search completed for term: NhatNam, found 1 results"}
{"level":"info","message":"Cache miss for search term: nguyen"}
{"level":"info","message":"Search completed for term: nguyen, found 16 results"}
{"level":"error","message":"Notification failed: res.status is not a function","stack":"TypeError: res.status is not a function\n    at exports.sendNotification (C:\\FPTPolytechnic\\TapTap\\Api\\src\\controllers\\auth\\sendNotification.js:22:16)\n    at NotificationService.sendFriendRequestNotification (C:\\FPTPolytechnic\\TapTap\\Api\\src\\services\\notificationService.js:8:16)\n    at exports.sendFriendRequest (C:\\FPTPolytechnic\\TapTap\\Api\\src\\controllers\\friend\\friendController.js:134:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Notification failed: res.status is not a function","stack":"TypeError: res.status is not a function\n    at exports.sendNotification (C:\\FPTPolytechnic\\TapTap\\Api\\src\\controllers\\auth\\sendNotification.js:22:16)\n    at NotificationService.sendFriendRequestNotification (C:\\FPTPolytechnic\\TapTap\\Api\\src\\services\\notificationService.js:8:16)\n    at exports.sendFriendRequest (C:\\FPTPolytechnic\\TapTap\\Api\\src\\controllers\\friend\\friendController.js:134:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Notification failed: res.status is not a function","stack":"TypeError: res.status is not a function\n    at exports.sendNotification (C:\\FPTPolytechnic\\TapTap\\Api\\src\\controllers\\auth\\sendNotification.js:22:16)\n    at NotificationService.sendFriendRequestNotification (C:\\FPTPolytechnic\\TapTap\\Api\\src\\services\\notificationService.js:8:16)\n    at exports.sendFriendRequest (C:\\FPTPolytechnic\\TapTap\\Api\\src\\controllers\\friend\\friendController.js:135:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"error","message":"Notification failed: res.status is not a function","stack":"TypeError: res.status is not a function\n    at exports.sendNotification (C:\\FPTPolytechnic\\TapTap\\Api\\src\\controllers\\auth\\sendNotification.js:22:16)\n    at NotificationService.sendFriendRequestNotification (C:\\FPTPolytechnic\\TapTap\\Api\\src\\services\\notificationService.js:10:16)\n    at exports.sendFriendRequest (C:\\FPTPolytechnic\\TapTap\\Api\\src\\controllers\\friend\\friendController.js:135:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"level":"info","message":"Friend request sent from 6773f10819073b07dc2f9e3d to 680cd2546e21dda817a11cf1"}
{"level":"error","message":"Error in acceptFriendRequest: notificationService.sendUserNotification is not a function","stack":"TypeError: notificationService.sendUserNotification is not a function\n    at exports.acceptFriendRequest (C:\\FPTPolytechnic\\TapTap\\Api\\src\\controllers\\friend\\friendController.js:177:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
{"code":11000,"errorResponse":{"code":11000,"errmsg":"E11000 duplicate key error collection: gamesphere.friendships index: user1_1_user2_1 dup key: { user1: ObjectId('6773f10819073b07dc2f9e3d'), user2: ObjectId('680cd2546e21dda817a11cf1') }","index":0,"keyPattern":{"user1":1,"user2":1},"keyValue":{"user1":"6773f10819073b07dc2f9e3d","user2":"680cd2546e21dda817a11cf1"}},"index":0,"keyPattern":{"user1":1,"user2":1},"keyValue":{"user1":"6773f10819073b07dc2f9e3d","user2":"680cd2546e21dda817a11cf1"},"level":"error","message":"Error in acceptFriendRequest: E11000 duplicate key error collection: gamesphere.friendships index: user1_1_user2_1 dup key: { user1: ObjectId('6773f10819073b07dc2f9e3d'), user2: ObjectId('680cd2546e21dda817a11cf1') }","stack":"MongoServerError: E11000 duplicate key error collection: gamesphere.friendships index: user1_1_user2_1 dup key: { user1: ObjectId('6773f10819073b07dc2f9e3d'), user2: ObjectId('680cd2546e21dda817a11cf1') }\n    at InsertOneOperation.execute (C:\\FPTPolytechnic\\TapTap\\Api\\node_modules\\mongodb\\lib\\operations\\insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (C:\\FPTPolytechnic\\TapTap\\Api\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:203:20)\n    at async executeOperation (C:\\FPTPolytechnic\\TapTap\\Api\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:73:16)\n    at async Collection.insertOne (C:\\FPTPolytechnic\\TapTap\\Api\\node_modules\\mongodb\\lib\\collection.js:157:16)"}
